<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
    
    <link name="base_footprint" />

    <!-- <link name="water_link">
        <collision>
            <geometry>
                <box size="10 10 5" />
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
        </collision>
    </link> -->

    <link name="base_link">
        <visual>
            <geometry>
                <mesh filename="package://reconbot_description/meshes/ReconBot_Main_Body.dae" />
            </geometry>
            <origin xyz="0 0 0.1" rpy="0 0 0" />
            <material name="blue" />
        </visual>
        <collision>
            <geometry>
                <box size="0.62 0.380 0.32" />
            </geometry>
            <origin xyz="0 0 0.2" rpy="0 0 0" />
        </collision>
        <inertial>
            <!-- <mass value="60.57865524" /> -->
            <mass value="81.47" />
            <origin xyz="0 0 0.2" rpy="0 0 0" />
            <inertia ixx="1.12548060" ixy="-0.00628401" ixz="-0.04074518" 
                    iyy="3.07956336" iyz="0.0028181" 
                    izz="2.63020163" />
        </inertial>

    </link>

    <xacro:macro name="thruster_link" params="prefix x y z p cx cp" >
        <link name="${prefix}_thruster_link">
            <visual>
                <geometry>
                    <mesh filename="package://reconbot_description/meshes/ReconBot_Thruster.dae" />
                </geometry>
                <origin xyz="${x} ${y} ${z}" rpy="0 ${p} 0" />
                <material name="grey" />
            </visual>
            <collision>
                <geometry>
                    <cylinder radius="0.065" length="0.178" />
                </geometry>
                <origin xyz="${cx} 0 0" rpy="0 ${cp} 0" />
            </collision>
            <inertial>
                <mass value="1.59521765" />
                <origin xyz="0 0 0" rpy="0 0 0" />
                <inertia ixx="0.00101028" ixy="-0.00019770" ixz="0.00000211" 
                        iyy="0.00434934" iyz="-0.00000027" 
                        izz="0.00462580" />
            </inertial>
        </link>
    </xacro:macro>

    <xacro:thruster_link prefix="right_horizontal" x="0.025" y="-0.135" z="-0.235" p="0" cx="0" cp="1.57" />
    <xacro:thruster_link prefix="left_horizontal" x="0.025" y="-0.135" z="-0.235" p="0" cx="0" cp="1.57" />
    <xacro:thruster_link prefix="back_right_vertical" x="-0.08" y="-0.135" z="-0.235" p="0.26" cx="-0.05" cp="1.8326" />
    <xacro:thruster_link prefix="back_left_vertical" x="0.04" y="-0.135" z="-0.235" p="-0.26" cx="-0.05" cp="-1.8326"/>
    <xacro:thruster_link prefix="front_left_vertical" x="-0.08" y="-0.135" z="-0.235" p="0.26" cx="-0.05" cp="1.8326"/>
    <xacro:thruster_link prefix="front_right_vertical" x="0.04" y="-0.135" z="-0.235" p="-0.26" cx="-0.05" cp="-1.8326"/>

    <xacro:macro name="thruster_propeller_link" params="prefix x" >
        <link name="${prefix}_thruster_propeller_link">
            <visual>
                <geometry>
                    <mesh filename="package://reconbot_description/meshes/Propeller.dae" />
                </geometry>
                <origin xyz="${x} 0 0" rpy="0 0 0" />
                <material name="red" />
            </visual>
            <collision>
                <geometry>
                    <cylinder radius="0.045" length="0.06" />
                </geometry>
                <origin xyz="0 0 0.02" rpy="0 0 0" />
            </collision>
            <inertial>
                <mass value="0.12426508" />
                <origin xyz="0 0 0" rpy="0 0 0" />
                <inertia ixx="0.00002949" ixy="0" ixz="0" 
                        iyy="0.00001860" iyz="0" 
                        izz="0.00002949" />
            </inertial>
        </link>
    </xacro:macro>

    <xacro:thruster_propeller_link prefix="right_horizontal" x="-0.002" />
    <xacro:thruster_propeller_link prefix="left_horizontal" x="-0.002" />
    <xacro:thruster_propeller_link prefix="back_right_vertical" x="0" />
    <xacro:thruster_propeller_link prefix="back_left_vertical" x="0" />
    <xacro:thruster_propeller_link prefix="front_left_vertical" x="0" />
    <xacro:thruster_propeller_link prefix="front_right_vertical" x="0" />

    <!-- <joint name="base_water_joint" type="fixed" >
        <parent link="base_footprint" />
        <child link="water_link" />
        <origin xyz="0 0 0" rpy="0 0 0" />
    </joint> -->

    <joint name="base_joint" type="fixed" >
        <parent link="base_footprint" />
        <child link="base_link" />
        <origin xyz="0 0 0" rpy="0 0 0" />
    </joint>

    <xacro:macro name="thruster_joint" params="prefix x y z r p yw" >
        <joint name="base_${prefix}_thruster_joint" type="fixed" >
            <parent link="base_link" />
            <child link="${prefix}_thruster_link" />
            <origin xyz="${x} ${y} ${z}" rpy="${r} ${p} ${yw}" />
        </joint>
    </xacro:macro>

    <xacro:thruster_joint prefix="right_horizontal" x="-0.025" y="0.135" z="0.335" r="0" p="0" yw="0" />
    <xacro:thruster_joint prefix="left_horizontal" x="-0.025" y="-0.1175" z="0.342" r="3.14" p="0" yw="0" />
    <xacro:thruster_joint prefix="back_right_vertical" x="0.32" y="0.09" z="0.18" r="1.57" p="1.57" yw="0" />
    <xacro:thruster_joint prefix="back_left_vertical" x="0.32" y="-0.09" z="0.18" r="1.57" p="1.57" yw="0" />
    <xacro:thruster_joint prefix="front_left_vertical" x="-0.385" y="-0.09" z="0.18" r="1.57" p="1.57" yw="3.14" />
    <xacro:thruster_joint prefix="front_right_vertical" x="-0.385" y="0.09" z="0.18" r="1.57" p="1.57" yw="3.14" />

    <xacro:macro name="thruster_propeller_joint" params="prefix x y z p" >
        <joint name="${prefix}_thruster_propeller_joint" type="continuous" >
            <parent link="${prefix}_thruster_link" />
            <child link="${prefix}_thruster_propeller_link" />
            <origin xyz="${x} ${y} ${z}" rpy="0 ${p} 0" />
            <axis xyz="0 0 1" />
        </joint>
    </xacro:macro>

    <xacro:thruster_propeller_joint prefix="right_horizontal" x="0.0955" y="0" z="0" p="1.57" />
    <xacro:thruster_propeller_joint prefix="left_horizontal" x="0.0955" y="0" z="0" p="1.57" />
    <xacro:thruster_propeller_joint prefix="back_right_vertical" x="0.0485" y="0.0022" z="-0.022" p="1.8326" />
    <xacro:thruster_propeller_joint prefix="back_left_vertical" x="0.0455" y="0.0022" z="0.0125" p="1.309" />
    <xacro:thruster_propeller_joint prefix="front_left_vertical" x="0.0485" y="0.0022" z="-0.022" p="1.8326" />
    <xacro:thruster_propeller_joint prefix="front_right_vertical" x="0.0455" y="0.0022" z="0.0125" p="1.309" />

</robot>