<?xml version="1.0"?>
<robot name="gr2" xmlns:xacro="http://www.ros.org/wiki/xacro">
    
    <link name="base_footprint" />

    <link name="base_link">
        <visual>
            <geometry>
                <mesh filename="package://reconbot_description/meshes/ReconBot_Main_Body.dae" />
            </geometry>
            <origin xyz="0 0 0.05" rpy="0 0 0" />
        </visual>
        <collision>
            <geometry>
                <box size="" />
            </geometry>
            <origin xyz="0 0 0.05" rpy="0 0 0" />
        </collision>
    </link>

    <xacro:macro name="thruster_link" params="prefix x y z p" >
        <link name="${prefix}_thruster_link">
            <visual>
                <geometry>
                    <mesh filename="package://reconbot_description/meshes/ReconBot_Thruster.dae" />
                </geometry>
                <origin xyz="${x} ${y} ${z}" rpy="0 ${p} 0" />
            </visual>
        </link>
    </xacro:macro>

    <xacro:thruster_link prefix="right_horizontal" x="0.025" y="-0.135" z="-0.235" p="0" />
    <xacro:thruster_link prefix="left_horizontal" x="0.025" y="-0.135" z="-0.235" p="0" />
    <xacro:thruster_link prefix="back_right_vertical" x="-0.03" y="-0.135" z="-0.235" p="0.26" />
    <xacro:thruster_link prefix="back_left_vertical" x="0.09" y="-0.135" z="-0.235" p="-0.26" />
    <xacro:thruster_link prefix="front_left_vertical" x="-0.03" y="-0.135" z="-0.235" p="0.26" />
    <xacro:thruster_link prefix="front_right_vertical" x="0.09" y="-0.135" z="-0.235" p="-0.26" />

    <xacro:macro name="thruster_propeller_link" params="prefix x" >
        <link name="${prefix}_thruster_propeller_link">
            <visual>
                <geometry>
                    <mesh filename="package://reconbot_description/meshes/Propeller.dae" />
                </geometry>
                <origin xyz="${x} 0 0" rpy="0 0 0" />
            </visual>
        </link>
    </xacro:macro>

    <xacro:thruster_propeller_link prefix="right_horizontal" x="-0.002" />
    <xacro:thruster_propeller_link prefix="left_horizontal" x="-0.002" />
    <xacro:thruster_propeller_link prefix="back_right_vertical" x="0" />
    <xacro:thruster_propeller_link prefix="back_left_vertical" x="0" />
    <xacro:thruster_propeller_link prefix="front_left_vertical" x="0" />
    <xacro:thruster_propeller_link prefix="front_right_vertical" x="0" />

    <joint name="base_joint" type="fixed" >
        <parent link="base_footprint" />
        <child link="base_link" />
        <origin xyz="0 0 0" rpy="0 0 0" />
    </joint>

    <xacro:macro name="thruster_joint" params="prefix child x y z r p yw" >
        <joint name="${prefix}_horizontal_thruster_joint" type="fixed" >
            <parent link="base_link" />
            <child link="${child}_thruster_link" />
            <origin xyz="${x} ${y} ${z}" rpy="${r} ${p} ${yw}" />
        </joint>
    </xacro:macro>

    <xacro:thruster_joint prefix="base_right_horizontal" child="right_horizontal" x="-0.025" y="0.135" z="0.285" r="0" p="0" yw="0" />
    <xacro:thruster_joint prefix="base_left_horizontal" child="left_horizontal" x="-0.025" y="-0.1175" z="0.292" r="3.14" p="0" yw="0" />
    <xacro:thruster_joint prefix="base_back_right_vertical" child="back_right_vertical" x="0.32" y="0.09" z="0.18" r="1.57" p="1.57" yw="0" />
    <xacro:thruster_joint prefix="base_back_left_vertical" child="back_left_vertical" x="0.32" y="-0.09" z="0.18" r="1.57" p="1.57" yw="0" />
    <xacro:thruster_joint prefix="base_front_left_vertical" child="front_left_vertical" x="-0.385" y="-0.09" z="0.18" r="1.57" p="1.57" yw="3.14" />
    <xacro:thruster_joint prefix="base_front_right_vertical" child="front_right_vertical" x="-0.385" y="0.09" z="0.18" r="1.57" p="1.57" yw="3.14" />

    <xacro:macro name="thruster_propeller_joint" params="prefix x y z p" >
        <joint name="${prefix}_thruster_propeller_joint" type="continuous" >
            <parent link="${prefix}_thruster_link" />
            <child link="${prefix}_thruster_propeller_link" />
            <origin xyz="${x} ${y} ${z}" rpy="0 ${p} 0" />
            <axis xyz="0 0 1" />
        </joint>
    </xacro:macro>

    <xacro:thruster_propeller_joint prefix="right_horizontal" x="0.0955" y="0" z="0" p="1.57" />
    <xacro:thruster_propeller_joint prefix="left_horizontal" x="0.0955" y="0" z="0" p="1.57" />
    <xacro:thruster_propeller_joint prefix="back_right_vertical" x="0.0985" y="0.0022" z="-0.022" p="1.8326" />
    <xacro:thruster_propeller_joint prefix="back_left_vertical" x="0.0955" y="0.0022" z="0.0125" p="1.309" />
    <xacro:thruster_propeller_joint prefix="front_left_vertical" x="0.0985" y="0.0022" z="-0.022" p="1.8326" />
    <xacro:thruster_propeller_joint prefix="front_right_vertical" x="0.0955" y="0.0022" z="0.0125" p="1.309" />

</robot>