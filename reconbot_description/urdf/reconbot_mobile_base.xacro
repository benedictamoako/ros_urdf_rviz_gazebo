<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
    
    <link name="base_footprint" />

    <link name="base_link">
        <visual>
            <geometry>
                <mesh filename="package://reconbot_description/meshes/ReconBot_Main_Body.dae" />
            </geometry>
            <origin xyz="0 0 0.05" rpy="0 0 0" />
            <material name="blue" />
        </visual>
        <collision>
            <geometry>
                <box size="0.56 0.385 0.335" />
            </geometry>
            <origin xyz="-0.0325 0.01 0.165" rpy="0 0 0" />
        </collision>
        <inertial>
            <mass value="60.57865524" />
            <origin xyz="0 0 0.1675" rpy="0 0 0" />
            <inertia ixx="2.173711367" ixy="0" ixz="0" 
                    iyy="1.252410727" iyz="0" 
                    izz="2.346243207" />
        </inertial>
    </link>

    <xacro:macro name="thruster_link" params="prefix x y z p cp" >
        <link name="${prefix}_thruster_link">
            <visual>
                <geometry>
                    <mesh filename="package://reconbot_description/meshes/ReconBot_Thruster.dae" />
                </geometry>
                <origin xyz="${x} ${y} ${z}" rpy="0 ${p} 0" />
                <material name="grey" />
            </visual>
            <collision>
                <geometry>
                    <cylinder radius="0.065" length="0.178" />
                </geometry>
                <origin xyz="0 0 0" rpy="0 ${cp} 0" />
            </collision>
            <inertial>
                <mass value="1.59521765" />
                <origin xyz="0 0 0.065" rpy="0 0 0" />
                <inertia ixx="0.00706634094" ixy="0" ixz="0" 
                        iyy="0.00706634094" iyz="0" 
                        izz="0.00336989728" />
            </inertial>
        </link>
    </xacro:macro>

    <xacro:thruster_link prefix="right_horizontal" x="0.025" y="-0.135" z="-0.235" p="0" cp="1.57" />
    <xacro:thruster_link prefix="left_horizontal" x="0.025" y="-0.135" z="-0.235" p="0" cp="1.57" />
    <xacro:thruster_link prefix="back_right_vertical" x="-0.03" y="-0.135" z="-0.235" p="0.26" cp="1.8326" />
    <xacro:thruster_link prefix="back_left_vertical" x="0.09" y="-0.135" z="-0.235" p="-0.26" cp="-1.8326"/>
    <xacro:thruster_link prefix="front_left_vertical" x="-0.03" y="-0.135" z="-0.235" p="0.26" cp="1.8326"/>
    <xacro:thruster_link prefix="front_right_vertical" x="0.09" y="-0.135" z="-0.235" p="-0.26" cp="-1.8326"/>

    <xacro:macro name="thruster_propeller_link" params="prefix x" >
        <link name="${prefix}_thruster_propeller_link">
            <visual>
                <geometry>
                    <mesh filename="package://reconbot_description/meshes/Propeller.dae" />
                </geometry>
                <origin xyz="${x} 0 0" rpy="0 0 0" />
                <material name="red" />
            </visual>
            <collision>
                <geometry>
                    <cylinder radius="0.045" length="0.06" />
                </geometry>
                <origin xyz="0 0 0.02" rpy="0 0 0" />
            </collision>
            <inertial>
                <mass value="0.12426508" />
                <origin xyz="0 0 0.045" rpy="0 0 0" />
                <inertia ixx="0.00010018872" ixy="0" ixz="0" 
                        iyy="0.00010018872" iyz="0" 
                        izz="0.00012581839" />
            </inertial>
        </link>
    </xacro:macro>

    <xacro:thruster_propeller_link prefix="right_horizontal" x="-0.002" />
    <xacro:thruster_propeller_link prefix="left_horizontal" x="-0.002" />
    <xacro:thruster_propeller_link prefix="back_right_vertical" x="0" />
    <xacro:thruster_propeller_link prefix="back_left_vertical" x="0" />
    <xacro:thruster_propeller_link prefix="front_left_vertical" x="0" />
    <xacro:thruster_propeller_link prefix="front_right_vertical" x="0" />

    <joint name="base_joint" type="fixed" >
        <parent link="base_footprint" />
        <child link="base_link" />
        <origin xyz="0 0 0" rpy="0 0 0" />
    </joint>

    <xacro:macro name="thruster_joint" params="prefix x y z r p yw" >
        <joint name="base_${prefix}_thruster_joint" type="fixed" >
            <parent link="base_link" />
            <child link="${prefix}_thruster_link" />
            <origin xyz="${x} ${y} ${z}" rpy="${r} ${p} ${yw}" />
        </joint>
    </xacro:macro>

    <xacro:thruster_joint prefix="right_horizontal" x="-0.025" y="0.135" z="0.285" r="0" p="0" yw="0" />
    <xacro:thruster_joint prefix="left_horizontal" x="-0.025" y="-0.1175" z="0.292" r="3.14" p="0" yw="0" />
    <xacro:thruster_joint prefix="back_right_vertical" x="0.32" y="0.09" z="0.18" r="1.57" p="1.57" yw="0" />
    <xacro:thruster_joint prefix="back_left_vertical" x="0.32" y="-0.09" z="0.18" r="1.57" p="1.57" yw="0" />
    <xacro:thruster_joint prefix="front_left_vertical" x="-0.385" y="-0.09" z="0.18" r="1.57" p="1.57" yw="3.14" />
    <xacro:thruster_joint prefix="front_right_vertical" x="-0.385" y="0.09" z="0.18" r="1.57" p="1.57" yw="3.14" />

    <xacro:macro name="thruster_propeller_joint" params="prefix x y z p" >
        <joint name="${prefix}_thruster_propeller_joint" type="continuous" >
            <parent link="${prefix}_thruster_link" />
            <child link="${prefix}_thruster_propeller_link" />
            <origin xyz="${x} ${y} ${z}" rpy="0 ${p} 0" />
            <axis xyz="0 0 1" />
        </joint>
    </xacro:macro>

    <xacro:thruster_propeller_joint prefix="right_horizontal" x="0.0955" y="0" z="0" p="1.57" />
    <xacro:thruster_propeller_joint prefix="left_horizontal" x="0.0955" y="0" z="0" p="1.57" />
    <xacro:thruster_propeller_joint prefix="back_right_vertical" x="0.0985" y="0.0022" z="-0.022" p="1.8326" />
    <xacro:thruster_propeller_joint prefix="back_left_vertical" x="0.0955" y="0.0022" z="0.0125" p="1.309" />
    <xacro:thruster_propeller_joint prefix="front_left_vertical" x="0.0985" y="0.0022" z="-0.022" p="1.8326" />
    <xacro:thruster_propeller_joint prefix="front_right_vertical" x="0.0955" y="0.0022" z="0.0125" p="1.309" />

</robot>